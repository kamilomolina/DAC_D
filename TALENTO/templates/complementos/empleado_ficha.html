<div class="row">
    <div class="col-md-12">
        <div class="card position-relative">
            <div class="card-body">
                <h4 class="section-title text-primary animate__animated animate__fadeInDown">Ficha Empleado</h4>
                <!-- Información General -->
                <form id="ficha-empleado-form">
                    <h5 class="subsection-title d-flex align-items-center">
                        <i class="material-icons me-2 text-gray">info</i> Información Laboral
                    </h5>
                    <div class="custom-divider"></div>

                    <div class="row mb-2 mt-3 align-items-center">
                        <div class="col-md-4 d-flex align-items-center">
                            <label for="" class="form-label">Dirección Laboral:</label>
                            <input type="text" id="direccion-laboral" name="direccion_laboral"
                                class="form-control input-underline" disabled style="background-color: white;">

                        </div>

                        <div class="col-md-4  d-flex align-items-center">
                            <label for="gerente" class="form-label custom-margin-right">Gerente:</label>
                            <select id="gerente" name="gerente" style="width: 100%;"
                                class="form-control input-underline select2 select_empleado">
                                <option value=""></option>
                                {% for cer in gerentes %}
                                <option value="{{ cer.0 }}">{{ cer.1 }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-4 d-flex align-items-center">
                            <label for="jefe-inmediato" class="form-label custom-margin-right">Jefe:</label>
                            <select id="jefe-inmediato" name="jefe_inmediato" style="width: 100%;"
                                class="form-control input-underline select2 select_empleado">
                                <option value=""></option>
                                {% for cer in jefes %}
                                <option value="{{ cer.0 }}">{{ cer.1 }}</option>
                                {% endfor %}

                            </select>
                        </div>

                        <div class="col-md-8 mt-2 d-flex align-items-center">
                            <label for="jefe-superior" class="form-label custom-margin-right">Superiores:</label>
                            <select id="jefe-superior" name="jefe_superior" style="width: 100%;"
                                class="form-control input-underline select2 select_empleado">
                                <option value=""></option>
                                {% for cer in superior %}
                                <option value="{{ cer.0 }}">{{ cer.1 }}</option>
                                {% endfor %}

                            </select>
                        </div>



                    </div>

                    <div class="row mb-2">
                        <div class="col-12 mt-2 ">
                            <label for="observaciones-generales" class="form-label">Observaciones Generales:</label>
                            <textarea id="observaciones-generales" name="observaciones_generales"
                                class="form-control input-underline" rows="4"
                                placeholder="Escriba las observaciones aquí..."></textarea>
                        </div>
                    </div>

                    <!-- Detalles del Puesto y Evaluaciones -->
                    <h5 class="subsection-title d-flex align-items-center">
                        <i class="material-icons me-2 text-gray">work</i> Detalles del Contrato
                    </h5>
                    <div class="custom-divider"></div>
                    <div class="row mb-2 align-items-center">
                        <div class="row mb-2 align-items-center">
                            <div class="col-md-12">
                                <div class="card">
                                    <div class="card-body" style="background-color: #f4f6f9;">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h4 class="card-title text-primary">Contratos</h4>
                                            <button type="button"
                                                class="btn btn-add-contratos mb-3 animate__animated animate__pulse animate__slow animate__infinite"
                                                style="background-color:  #f5c542; color: #ffffff;"
                                                id="btnAbrirModalContrato">
                                                <i class="material-icons">add</i>
                                            </button>

                                        </div>
                                        <div class="table-responsive">
                                            <table id="allContratosTable"
                                                class="table table-sm table-hover table-center table-borderless table-striped"
                                                style="width:100%">
                                                <tfoot class="text-center" style="display: table-header-group;">
                                                    <tr>
                                                        <th class="text-center">#</th>
                                                        <th class="text-center">Identidad</th>
                                                        <th class="text-center">Empleado</th>
                                                        <th class="text-center">Tipo Contrato</th>
                                                        <th class="text-center">Estado</th>
                                                        <th class="text-center">Meses</th>
                                                        <th class="text-center"></th>
                                                    </tr>
                                                </tfoot>
                                                <thead class="bg-light">
                                                    <tr>
                                                        <th class="text-center">#</th>
                                                        <th class="text-center">Identidad</th>
                                                        <th class="text-center">Empleado</th>
                                                        <th class="text-center">Tipo Contrato</th>
                                                        <th class="text-center">Estado</th>
                                                        <th class="text-center">Meses</th>
                                                        <th class="text-center">Acciones</th>
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>


                    <h5 class="subsection-title d-flex align-items-center">
                        <i class="material-icons me-2 text-gray">beach_access</i> Vacaciones del Empleado
                    </h5>

                    <div class="custom-divider"></div>
                    <div class="row mb-2 align-items-center">
                        <div class="row mb-2 align-items-center">
                            <div class="col-md-12">
                                <div class="card card-table comman-shadow shadow-lg">
                                    <div class="card-body" style="background-color: #f4f6f9;">
                                        <div class="row align-items-center">

                                            <div class="col">
                                                <h3 class="page-title text-uppercase">CALCULO DE VACACIONES POR EMPLEADO
                                                </h3>
                                            </div>
                                        </div>
                                        <br>
                                        <div class="table-responsive">
                                            <table id="calculosVacacionesTable"
                                                class="table table-sm table-hover table-center table-borderless table-striped"
                                                style="width:100%">
                                                <thead class="bg-light">
                                                    <tr>
                                                        <th class="text-center">#</th>
                                                        <th class="text-center">Fecha Inicio</th>
                                                        <th class="text-center">Fecha Actual</th>
                                                        <th class="text-center">Tiempo Transcurrido</th>
                                                        <th class="text-center">Dias Vacaciones</th>
                                                        <th class="text-center">Dias Tomados</th>
                                                        <th class="text-center">Total Disponibles</th>

                                                    </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row mb-2 align-items-center">
                        <div class="col-md-12">
                            <div class="card card-table comman-shadow shadow-lg">
                                <div class="card-body" style="background-color: #f4f6f9;">
                                    <div class="row align-items-center">

                                        <div class="col">
                                            <h3 class="page-title text-uppercase">Historial de Vacaciones del Empleado
                                            </h3>

                                        </div>


                                        <div class="col-auto text-end float-end ms-auto download-grp">
                                            <a href="#" class="btn btn-primary" id="btnNuevoVacaciones"
                                                data-bs-toggle="modal" data-bs-target="#modalVacaciones"
                                                title="Crear Nuevo" alt="Crear Nuevo">
                                                <i class="fas fa-plus"></i>
                                            </a>
                                        </div>
                                    </div>
                                    <br>

                                    <div class="table-responsive">
                                        <table id="vacacionesTable"
                                            class="table table-sm table-hover table-center table-borderless table-striped"
                                            style="width:100%">
                                            <thead class="bg-light">
                                                <tr>
                                                    <th class="text-center">#</th>
                                                    <th class="text-center">DNI</th>
                                                    <th class="text-center">Empleado</th>
                                                    <th class="text-center">Fecha Inicio</th>
                                                    <th class="text-center">Fecha Final</th>
                                                    <th class="text-center">Dias Tomados</th>
                                                    <th class="text-center">Comentario</th>
                                                    <th class="text-center">Estado</th>
                                                    <th class="text-center">Ticket</th>
                                                    <th class="text-center">Acciones</th>

                                                </tr>
                                            </thead>
                                            <tbody>

                                            </tbody>
                                        </table>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- Detalles de Beneficios y Pagos -->
                    <h5 class="subsection-title d-flex align-items-center">
                        <i class="material-icons me-2 text-gray">payments</i> Gestión de Pagos
                    </h5>

                    <div class="custom-divider"></div>

                    <div class="row mb-2 align-items-center">
                        <div class="col-md-4 d-flex align-items-center">
                            <label for="salario" class="form-label"><span style="color: red;">*</span>Salario: </label>
                            <input type="number" step="0.01" id="salario" name="salario"
                                class="form-control input-underline">

                        </div>

                        <div class="col-md-4 d-flex align-items-center">
                            <label for="fecha_aplica_salario" class="form-label"><span style="color: red;">*</span>Fecha Aplica Salario: </label>
                            <input type="date" id="fecha_aplica_salario" name="fecha_aplica_salario"
                                class="form-control input-underline">
                        </div>

                        <div class="col-md-4 d-flex align-items-center">
                            <label for="forma-pago" class="form-label"><span style="color: red;">*</span>Pago: </label>
                            <select id="forma-pago" name="forma_pago" style="width: 100%;"
                                class="form-control input-underline select2">
                                <option value=""></option>
                                <option value="new-forma-pago">Crear nueva forma de pago</option>
                                {% for forma in formas %}
                                <option value="{{ forma.0 }}">{{ forma.1 }}</option>
                                {% endfor %}

                            </select>
                        </div>
                        <div class="col-md-4 d-flex align-items-center">
                            <label for="nuevo-banco" class="form-label"><span style="color: red;">*</span>Banco:
                            </label>
                            <select id="nuevo-banco" name="nuevo_banco" style="width: 100%;"
                                class="form-control input-underline select2" placeholder="Nivel certificado">
                                <option value=""></option>
                                <option value="new-banco">Crear nuevo banco</option>
                                {% for cer in bancos %}
                                <option value="{{ cer.0 }}">{{ cer.1 }}</option>
                                {% endfor %}
                            </select>

                        </div>

                        <div class="col-md-4 d-flex align-items-center">
                            <label for="cuenta_bancaria" class="form-label">Cuenta Bancaria:</label>
                            <input type="text" id="cuenta_bancaria" name="cuenta_bancaria"
                                class="form-control input-underline">
                        </div>
                    </div>


                    <!-- Detalles de Beneficios y Pagos -->
                    <h5 class="subsection-title d-flex align-items-center">
                        <i class="material-icons me-2 text-gray">card_giftcard</i> Detalles de Beneficios Laborales y
                        Adicionales
                    </h5>

                    <div class="custom-divider"></div>
                    <div class="row" style="margin-top: 1rem;">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-body" style="background-color: #f4f6f9;">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h4 class="card-title text-primary">Beneficios Laborales</h4>
                                        <button type="button"
                                            class="btn btn-add-laborales mb-3 animate__animated animate__pulse animate__slow animate__infinite"
                                            style="background-color: #f5c542; color: #ffffff;" data-toggle="modal"
                                            data-target="#modalCrearBeneficioLaboralEmpleado">
                                            <i class="material-icons">add</i>
                                        </button>
                                    </div>
                                    <div class="table-responsive">
                                        <table id="beneficios-laborales-table"
                                            class="table table-striped table-bordered table-top-border"
                                            style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Beneficio</th>
                                                    <th>Descripcion</th>
                                                    <th>Valor</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="custom-divider"></div>
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-body" style="background-color: #f4f6f9;">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h4 class="card-title text-primary">Beneficios Adicionales</h4>
                                        <button type="button"
                                            class="btn btn-add-adicional mb-3 animate__animated animate__pulse animate__slow animate__infinite"
                                            style="background-color: #f5c542; color: #ffffff;" data-toggle="modal"
                                            data-target="#modalCrearBeneficioAdicionalEmpleado">
                                            <i class="material-icons">add</i>
                                        </button>

                                    </div>
                                    <div class="table-responsive">
                                        <table id="beneficios-adicionales-table"
                                            class="table table-striped table-bordered table-top-border"
                                            style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Beneficio</th>
                                                    <th>Descripcion</th>
                                                    <th>Valor</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h5 class="subsection-title d-flex align-items-center">
                        <i class="material-icons me-2 text-gray">verified_user</i> Detalles de Seguros
                    </h5>
                    <div class="custom-divider"></div>
                    <div class="row mb-2 align-items-center">
                        <div class="row mb-2 align-items-center">
                            <div class="col-md-12">
                                <div class="card card-table comman-shadow shadow-lg">
                                    <div class="card-body" style="background-color: #f4f6f9;">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h4 class="card-title text-primary">Seguros</h4>
                                            <button type="button"
                                                class="btn btn-add-seguros mb-3 animate__animated animate__pulse animate__slow animate__infinite"
                                                style="background-color:  #f5c542; color: #ffffff;" data-toggle="modal"
                                                data-target="#nuevoSeguroModal">
                                                <i class="material-icons">add</i>
                                            </button>
                                        </div>
                                        <div class="table-responsive">
                                            <table id="seguros-table"
                                                class="table table-sm table-hover table-center table-borderless table-striped"
                                                style="width:100%">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center">#</th>
                                                        <th class="text-center">Nombre Empresa</th>
                                                        <th class="text-center">Póliza</th>
                                                        <th class="text-center">Valor Mensual</th>
                                                        <th class="text-center">Fecha Inicial</th>
                                                        <th class="text-center">Fecha Final</th>
                                                        <th class="text-center">Acciones</th>
                                                    </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- Detalles Financieros -->
                    <h5 class="subsection-title d-flex align-items-center">
                        <i class="material-icons me-2 text-gray">account_balance</i> Detalles Financieros
                    </h5>
                    <div class="custom-divider"></div>

                    <div class="row mb-2 align-items-center">
                        <div class="col-md-4 d-flex align-items-center">
                            <label for="tipo-cuenta" class="form-label">Tipo de Cuenta:</label>
                            <select id="tipo-cuenta" name="tipo_cuenta" style="width: 100%;"
                                class="form-control input-underline select2">
                                <option value=""></option>
                                {% for cuenta in cuentas %}
                                <option value="{{ cuenta.0 }}">{{ cuenta.1 }}</option>
                                {% endfor %}
                            </select>
                        </div>


                        <div class="col-md-4 d-flex align-items-center">
                            <label for="centro-costo" class="form-label">Centro de Costo:</label>
                            <select id="centro-costo" name="centro_costo" style="width: 100%;"
                                class="form-control input-underline select2">
                                <option value=""></option>

                                {% for centro in centros %}
                                <option value="{{ centro.0 }}">{{ centro.1 }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-4 d-flex align-items-center">
                            <label for="cuenta-contable" class="form-label">Cuenta Contable:</label>
                            <select id="cuenta-contable" name="cuenta_contable" style="width: 100%;"
                                name="cuenta-contable" class="form-control input-underline select2">
                                <option value="">Selecciona una cuenta contable</option>

                            </select>
                        </div>
                    </div>

                    <!-- Detalles de Retiro -->
                    <h5 class="subsection-title d-flex align-items-center">
                        <i class="material-icons me-2 text-gray">exit_to_app</i> Detalles de Retiro
                    </h5>
                    <div class="custom-divider"></div>
                    <div class="row mb-2 align-items-center">
                        <div class="col-md-4 d-flex align-items-center">
                            <label for="nuevo-categoria-retiros" class="form-label">Categoría Retiros:</label>

                            <select id="nuevo-categoria-retiros" name="nuevo_categoria_retiros" style="width: 100%;"
                                class="form-control input-underline select2" placeholder="Nivel certificado">
                                <option value=""></option>
                                <option value="new-categoria-retiros">Crear una nueva categoría retiro</option>
                                {% for cer in categorias %}
                                <option value="{{ cer.0 }}">{{ cer.1 }}</option>
                                {% endfor %}
                            </select>

                        </div>
                        <div class="col-md-4 d-flex align-items-center">
                            <label for="nuevo-motivo-retiro" class="form-label">Motivo Retiro:</label>
                            <select id="nuevo-motivo-retiro" name="nuevo_motivo_retiro" style="width: 100%;"
                                class="form-control input-underline select2" placeholder="Nivel certificado">
                                <option value=""></option>
                                <option value="new-motivo-retiro">Crear nuevo motivo de retiro</option>
                                {% for cer in motivos %}
                                <option value="{{ cer.0 }}">{{ cer.1 }}</option>
                                {% endfor %}
                            </select>


                        </div>

                        <div class="col-md-4 d-flex align-items-center">
                            <label for="fecha-retiro" class="form-label">Fecha de Retiro:</label>
                            <input type="date" id="fecha-retiro" name="fecha_retiro"
                                class="form-control input-underline">
                        </div>
                        <div class="col-12">
                            <label for="observaciones-retiro" class="form-label">Observaciones Retiro:</label>

                            <textarea id="observaciones-retiro" name="observaciones_retiro"
                                class="form-control input-underline" rows="4"
                                placeholder="Escriba las observaciones aquí..."></textarea>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {




        $('.select2').select2();
        // Evento para abrir el modal al seleccionar "Crear nuevo departamento"
        $('#beneficios-laborales').on('select2:select', function (e) {
            if (e.params.data.id === 'new-beneficio-laboral') {
                $('#modalCrearBeneficioLaboral').modal('show');
            }
        });

        $('#formCrearTipoContrato').on('submit', function (event) {
            event.preventDefault();
            let contratoName = $('#tipo_contrato').val();
            const creadoPor = $('#creado_por').val();

            // Convertir el nombre del área a mayúsculas 
            contratoName = contratoName.toUpperCase();

            console.log('Nombre del tipo de contrato (en mayúsculas):', contratoName); // Verificar el nombre del área 
            console.log('Creado por:', creadoPor); // Verificar el valor de creado por 

            $.ajax({
                type: 'POST',
                url: '{% url "crear_contrato" %}',
                data: {
                    'tipo_contrato': contratoName,
                    'creado_por': creadoPor,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (response) {
                    console.log('Respuesta del servidor:', response); // Verificar la respuesta del servidor 
                    if (response.status === 'success') {
                        // Cerrar el modal 
                        $('#modalCrearTipoContrato').modal('hide');

                        // Añadir la nueva área al select como la primera opción 
                        const newOption = new Option(contratoName, contratoName);
                        $('#tipo-contrato').prepend(newOption);
                        $('#tipo-contrato').val(contratoName); // Seleccionar la nueva opción 

                        // Limpiar el formulario del modal 
                        $('#tipo_contrato').val('');
                    } else {
                        console.error('Error en la respuesta del servidor:', response.message);
                    }
                },
                error: function (response) {
                    console.error('Error al crear el área', response); // Verificar el error 
                }
            });
        });

        $(document).ready(function () {
            $('#FormCrearCategoriaRetiro').on('submit', function (event) {
                event.preventDefault();

                // Obtener los valores del formulario
                let nombreCategoria = $('#cat_retiro').val().trim();
                const creadoPor = $('#creado_por').val();

                // Convertir el nombre de la categoría a mayúsculas si no está vacío
                nombreCategoria = nombreCategoria.toUpperCase();

                // Validación simple
                let errorMessage = '';

                // Validar si se ha ingresado el nombre de la categoría
                if (!nombreCategoria) {
                    errorMessage += 'El campo "Categoría de Retiro" es obligatorio.\n';
                }

                // Validar si se ha ingresado el usuario creador
                if (!creadoPor) {
                    errorMessage += 'Su sesión ha expirado. Por favor, inicie sesión nuevamente.\n';
                }

                // Si hay errores, mostrar el mensaje de error y detener la ejecución
                if (errorMessage) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Campos Obligatorios',
                        text: errorMessage.replace(/\n/g, ' '),  // Mostrar los errores en una sola línea
                        confirmButtonText: 'Aceptar'
                    });
                    return;  // Detener la ejecución si hay errores
                }

                // Si no hay errores, proceder con la solicitud AJAX
                $.ajax({
                    type: 'POST',
                    url: '{% url "crear_categoria_retiro" %}',  // URL de la vista Django que maneja la solicitud
                    data: {
                        'categoria_retiro': nombreCategoria,
                        'creado_por': creadoPor,
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (response) {
                        console.log('Respuesta del servidor:', response); // Verificar la respuesta del servidor
                        if (response.status === 'success') {
                            // Cerrar el modal
                            $('#modalCrearCatRetiro').modal('hide');

                            // Añadir la nueva categoría al select como la primera opción
                            const newOption = new Option(nombreCategoria, nombreCategoria);
                            $('#nuevo-categoria-retiros').prepend(newOption);
                            $('#nuevo-categoria-retiros').val(nombreCategoria); // Seleccionar la nueva opción

                            // Limpiar el formulario del modal
                            $('#cat_retiro').val('');
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: 'Ocurrió un error al crear la categoría de retiro. Inténtelo nuevamente.',
                                confirmButtonText: 'Aceptar'
                            });
                            console.error('Error en la respuesta del servidor:', response.message);
                        }
                    },
                    error: function (response) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: 'Error al enviar la solicitud. Por favor, inténtelo nuevamente.',
                            confirmButtonText: 'Aceptar'
                        });
                        console.error('Error al enviar la solicitud:', response); // Verificar el error
                    }
                });
            });
        });


        $(document).ready(function () {
            $('#formCrearMotivoRetiro').on('submit', function (event) {
                event.preventDefault();

                // Obtener los valores del formulario
                let nombreMotivoRetiro = $('#motivo_retiro').val().trim();
                const creadoPor = $('#creado_por').val();

                // Convertir el nombre del motivo de retiro a mayúsculas si no está vacío
                nombreMotivoRetiro = nombreMotivoRetiro.toUpperCase();

                // Validación simple
                let errorMessage = '';

                // Validar si se ha ingresado el nombre del motivo de retiro
                if (!nombreMotivoRetiro) {
                    errorMessage += 'El campo "Motivo de Retiro" es obligatorio.\n';
                }

                // Validar si se ha ingresado el usuario creador
                if (!creadoPor) {
                    errorMessage += 'Su sesión ha expirado. Por favor, inicie sesión nuevamente.\n';
                }

                // Si hay errores, mostrar el mensaje de error y detener la ejecución
                if (errorMessage) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Campos Obligatorios',
                        text: errorMessage.replace(/\n/g, ' '),  // Mostrar los errores en una sola línea
                        confirmButtonText: 'Aceptar'
                    });
                    return;  // Detener la ejecución si hay errores
                }

                // Si no hay errores, proceder con la solicitud AJAX
                $.ajax({
                    type: 'POST',
                    url: '{% url "crear_motivo_retiro" %}',  // Asegúrate de que esta URL esté definida en tus URLs de Django
                    data: {
                        'motivo_retiro': nombreMotivoRetiro,
                        'creado_por': creadoPor,
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (response) {
                        console.log('Respuesta del servidor:', response); // Verificar la respuesta del servidor
                        if (response.status === 'success') {
                            // Cerrar el modal
                            $('#modalCrearMotivoRetiro').modal('hide');

                            // Añadir el nuevo motivo de retiro al select como la primera opción
                            const newOption = new Option(nombreMotivoRetiro, nombreMotivoRetiro);
                            $('#nuevo-motivo-retiro').prepend(newOption);
                            $('#nuevo-motivo-retiro').val(nombreMotivoRetiro); // Seleccionar la nueva opción

                            // Limpiar el formulario del modal
                            $('#motivo_retiro').val('');
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: 'Ocurrió un error al crear el motivo de retiro. Inténtelo nuevamente.',
                                confirmButtonText: 'Aceptar'
                            });
                            console.error('Error en la respuesta del servidor:', response.message);
                        }
                    },
                    error: function (response) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: 'Error al enviar la solicitud. Por favor, inténtelo nuevamente.',
                            confirmButtonText: 'Aceptar'
                        });
                        console.error('Error al enviar la solicitud:', response); // Verificar el error
                    }
                });
            });
        });

        $(document).ready(function () {
            $('#formCrearFormasPago').on('submit', function (event) {
                event.preventDefault();

                // Obtener los valores del formulario
                let formasPagos = $('#nueva-forma-pago').val().trim();
                const creadoPor = $('#creado_por').val();

                // Convertir el nombre de la forma de pago a mayúsculas si no está vacío
                formasPagos = formasPagos.toUpperCase();

                // Validación simple
                let errorMessage = '';

                // Validar si se ha ingresado la forma de pago
                if (!formasPagos) {
                    errorMessage += 'El campo "Forma de Pago" es obligatorio.\n';
                }

                // Validar si se ha ingresado el usuario creador
                if (!creadoPor) {
                    errorMessage += 'Su sesión ha expirado. Por favor, inicie sesión nuevamente.\n';
                }

                // Si hay errores, mostrar el mensaje de error y detener la ejecución
                if (errorMessage) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Campos Obligatorios',
                        text: errorMessage.replace(/\n/g, ' '),  // Mostrar los errores en una sola línea
                        confirmButtonText: 'Aceptar'
                    });
                    return;  // Detener la ejecución si hay errores
                }

                // Si no hay errores, proceder con la solicitud AJAX
                $.ajax({
                    type: 'POST',
                    url: '{% url "crear_formas_pagos" %}',  // Asegúrate de que esta URL esté definida en tus URLs de Django
                    data: {
                        'forma_de_pago': formasPagos,
                        'creado_por': creadoPor,
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function (response) {
                        console.log('Respuesta del servidor:', response); // Verificar la respuesta del servidor
                        if (response.status === 'success') {
                            // Cerrar el modal
                            $('#modalCrearFormaPago').modal('hide');

                            // Añadir la nueva forma de pago al select como la primera opción
                            const newOption = new Option(formasPagos, formasPagos);
                            $('#forma-pago').prepend(newOption);
                            $('#forma-pago').val(formasPagos); // Seleccionar la nueva opción

                            // Limpiar el formulario del modal
                            $('#nueva-forma-pago').val('');
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: 'Ocurrió un error al crear la forma de pago. Inténtelo nuevamente.',
                                confirmButtonText: 'Aceptar'
                            });
                            console.error('Error en la respuesta del servidor:', response.message);
                        }
                    },
                    error: function (response) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: 'Ocurrió un error al crear la forma de pago. Inténtelo nuevamente.',
                            confirmButtonText: 'Aceptar'
                        });
                        console.error('Error al crear la forma de pago', response);
                    }
                });
            });
        });





    });
</script>