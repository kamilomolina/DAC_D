{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous">
    </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous">
    </script>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css">

<link href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.css" rel="stylesheet">
<link href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.css" rel="stylesheet">
<link href="https://cdn.datatables.net/fixedcolumns/4.3.0/css/fixedColumns.dataTables.css" rel="stylesheet">
<link href="https://cdn.datatables.net/fixedheader/3.4.0/css/fixedHeader.dataTables.css" rel="stylesheet">
<link href="https://cdn.datatables.net/searchpanes/2.2.0/css/searchPanes.dataTables.css" rel="stylesheet">
<link href="https://cdn.datatables.net/select/1.7.0/css/select.dataTables.css" rel="stylesheet">


<script src="https://kit.fontawesome.com/e716b78aa6.js" crossorigin="anonymous"></script>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<script type="text/javascript" src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<link rel="stylesheet" href="{% static 'app/css/CWS.css' %}">

<link rel="icon" href="{% static 'app/cws/images/favicon.ico' %}" type="image/x-icon">
<link rel="apple-touch-icon" sizes="180x180" href="{% static 'app/cws/images/apple-touch-icon.png' %}">
<link rel="icon" type="image/png" sizes="32x32" href="{% static 'app/cws/images/favicon-32x32.png' %}">
<link rel="icon" type="image/png" sizes="16x16" href="{% static 'app/cws/images/favicon-16x16.png' %}">
<link rel="manifest" href="{% static 'app/cws/images/site.webmanifest' %}">

<title>

    MODULOS DEL USUARIO

</title>

<style>
    #sidebar,
    .header .header-left {
        background: #205c634c;
    }

    body {
        font-family: 'Roboto', sans-serif;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-image: linear-gradient(135deg, #2ecc7046 25%, transparent 25%),
            linear-gradient(225deg, #3498db42 25%, transparent 25%),
            linear-gradient(45deg, #3498db44 25%, transparent 25%),
            linear-gradient(315deg, #2ecc7044 25%, #ffffff 25%);
        background-position: 0 0, 0 0, 0 0, 0 0;
        background-size: 100%;

    }

    .img-container {
        width: 100%;
        padding-top: 75%;
        /* Aspect ratio 4:3 */
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .card-img-top {
        max-width: 100%;
        max-height: 100%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
</style>

</head>

<body>

<div class="main-wrapper">
    <div class="header" id="header-navbar">

        <ul class="nav user-menu">

            <li class="nav-item dropdown has-arrow new-user-menus">
                <a href="#" class="dropdown-toggle nav-link" data-bs-toggle="dropdown">
                    <span class="user-img">
                        <img class="rounded-circle" src="{% static 'app/ticketit/images/avatar-01.png' %}"
                            width="31">
                        <div class="user-text">
                            <h6>{{ fullName }}</h6>
                        </div>
                    </span>
                </a>
                <div class="dropdown-menu">
                    <div class="user-header">
                        <div class="avatar avatar-sm">
                            <img src="{% static 'app/ticketit/images/avatar-01.png' %}"
                                class="avatar-img rounded-circle">
                        </div>
                        <div class="user-text">
                            <h6>{{ fullName }}</h6>
                        </div>
                    </div>
                    <a class="dropdown-item" href="{% url 'logoutRequest' %}">Salir</a>
                </div>
            </li>

        </ul>
    </div>

    <div class="page-wrapper content container-fluid">
        <div class="row">
            <div class="col-lg-12">

                <div class="card comman-shadow shadow-lg">
                    <div class="card-body">

                        <div class="row align-items-center">
                            <div class="col">
                                <h3 class="page-title">APLICACIONES</h3>
                            </div>
                        </div>

                        <br>


                        <div class="container">

                            <div class="row d-flex justify-content-around">

                                <div class="col-6 col-md-3 mb-4">
                                    <div class="icon-card ">
                                        <div class="img-container">
                                            <img class="card-img-top"
                                                src="{% static 'app/controlsum/images/CSUM1.jpg' %}" alt="CONTROLSUM Logo" style="width: 200%">
                                        </div>
                                        <div class="card-body clickedModule">
                                            <input type="hidden" value="21" class="moduleValue">
                                            <input type="hidden" value="control/suministros/panel/" class="moduleUrl">
                                            <button class="btn btn-sm text-center text-white w-100" id="btnSuministros"
                                                style="background-image: linear-gradient(to right, #208d3c, #46da5f, #076113);">CONTROL SUMINISTROS</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 col-md-3 mb-4">
                                    <div class="d-flex justify-content-center">
                                        <div class="card" style="width: 100%;">
                                            <div class="img-container">
                                                <img class="card-img-top"
                                                    src="{% static 'app/dac/images/dac_logo.png' %}" alt="DAC Logo">
                                            </div>
                                            <div class="card-body">
                                                <button class="btn btn-sm text-center text-white w-100 btnAcceso"
                                                    id="btnDAC"
                                                    style="background-image: linear-gradient(to right, #8338a3, #a458c4, #6e3189);">DAC</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 col-md-3 mb-4">
                                    <div class="d-flex justify-content-center">
                                        <div class="card" style="width: 100%;">
                                            <div class="img-container">
                                                <img class="card-img-top"
                                                    src="{% static 'app/evac/images/login/logo.png' %}"
                                                    alt="EVAC Logo">
                                            </div>
                                            <div class="card-body">
                                                <button class="btn btn-sm text-center text-white w-100 btnAcceso"
                                                    id="btnEVAC"
                                                    style="background-image: linear-gradient(to right, #3D59B4, #5693c4, #3251b6);">EVAC</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 col-md-3 mb-4">
                                    <div class="d-flex justify-content-center">
                                        <div class="card" style="width: 100%;">
                                            <div class="img-container">
                                                <img class="card-img-top"
                                                    src="{% static 'app/ticketit/images/login/logo.png' %}"
                                                    alt="TICKETIT Logo">
                                            </div>
                                            <div class="card-body">
                                                <button class="btn btn-sm text-center text-white w-100 btnAcceso"
                                                    id="btnTICKETIT"
                                                    style="background-image: linear-gradient(to right, #398891, #45a0aa, #205c63);">TICKETIT</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 col-md-3 mb-4">
                                    <div class="icon-card ">
                                        <div class="img-container">
                                            <img class="card-img-top" src="{% static 'app/th/images/rh.jpg' %}"
                                                alt="TH Logo">
                                        </div>
                                        <div class="card-body">
                                            <input type="hidden" value="19" class="moduleValue">
                                            <input type="hidden" value="talento/humano" class="moduleUrl">
                                            <button class="btn btn-sm text-center text-white w-100" id="btnTH"
                                                style="background-image: linear-gradient(to right, #398891, #1a8de4, #24d7eb);">TALENTO
                                                HUMANO</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-6 col-md-3 mb-4">
                                    <div class="icon-card ">
                                        <div class="img-container">
                                            <img class="card-img-top"
                                                src="{% static 'app/contabilidad/images/logo.png' %}" alt="TH Logo" style="width: 250px;">
                                        </div>
                                        <div class="card-body">
                                            <input type="hidden" value="12" class="moduleValue">
                                            <input type="hidden" value="contabilidad/panel/" class="moduleUrl">
                                            <button class="btn btn-sm text-center text-white w-100" id="btnContable"
                                                style="background-image: linear-gradient(to right, #ad6852, #d7e41a, #7c2f2f);">CONTABLE</button>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Copyright © 2023. v1.1 - RM</p>
    </footer>
</div>








    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.js"></script>
    <script src="https://cdn.datatables.net/fixedcolumns/4.3.0/js/dataTables.fixedColumns.js"></script>
    <script src="https://cdn.datatables.net/fixedheader/3.4.0/js/dataTables.fixedHeader.js"></script>
    <script src="https://cdn.datatables.net/searchpanes/2.2.0/js/dataTables.searchPanes.js"></script>
    <script src="https://cdn.datatables.net/select/1.7.0/js/dataTables.select.js"></script>

    <script src="https://cdn.datatables.net/plug-ins/1.13.1/api/sum().js"></script>
    <script src="https://cdn.datatables.net/plug-ins/1.12.1/sorting/currency.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/TableExport/5.2.0/js/tableexport.min.js"></script>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/autonumeric@4.6.0/dist/autoNumeric.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.min.js"></script>

    <script>
        $(document).ready(function () {
            $(".formattedMoneyInputs").inputmask("decimal", {
                radixPoint: ".",
                groupSeparator: ",",
                digits: 2,
                autoGroup: true,
                rightAlign: false,
                removeMaskOnSubmit: true,
            });

            var csrfToken = "{{ csrf_token }}";
            var user_id = "{{ user_id }}";
            var userName = "{{ userName }}";
            //AÑADIR EMPRESA

            localStorage.setItem('jwtToken', '{{token}}');





            $(document).on('click', '.clickedModule', function () {
                var modulo = $(this).closest('.clickedModule').find('.moduleValue').val();
                var url = $(this).closest('.clickedModule').find('.moduleUrl').val();
                var token = localStorage.getItem('jwtToken');

                $.ajax({
                    url: `{% url 'moduleRequest' %}`,
                    type: "POST",
                    dataScr: 'data',
                    data: {
                        modulo: modulo,
                        user_id: user_id,
                        username: userName,
                        csrfmiddlewaretoken: csrfToken
                    },
                    dataType: "json",
                    success: function (data) {
                        Swal.close();
                        if (data.save == 1) {
                            if (data.module == 1) {
                                window.location = "/CWS/modulos/" + url;

                            } else {
                                Swal.fire("", "No tienes acceso al Modulo!", "warning");
                            }
                        } else {
                            Swal.fire("", "Error: " + data.error, "error");
                        }
                    }
                });
            });
        });
    </script>


</body>

</html>