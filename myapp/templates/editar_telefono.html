<form id="formEditarTelefono" method="POST" action="">
    <div class="form-group">
        {% csrf_token %}
        <input type="hidden" name="telefono_id" id="input_telefono_id" value="">
        <input type="hidden" name="usuario_id" id="input_usuario_id" value="{{ usuario_id }}">

        <div class="row">
            <div class="col-lg-4">
                <label for="codigo_verificacion" class="col-form-label">Código de Verificación:</label>
                <input type="text" class="form-control form-control-sm" id="input_codigo_verificacion" name="codigo_verificacion" value="{{ telefono.codigo_verificacion }}">

                <label for="nombre_empleado" class="col-form-label">Nombre del Empleado:</label>
                <input type="text" class="form-control form-control-sm" id="input_nombre_empleado" name="nombre_empleado" value="{{ telefono.nombre_empleado }}">

                <label for="mac_address" class="col-form-label">MAC Address:</label>
                <input type="text" class="form-control form-control-sm" id="input_mac_address" name="mac_address" value="{{ telefono.mac_address }}">

                <label for="imei_1" class="col-form-label">SIM Serial:</label>
                <input type="text" class="form-control form-control-sm" id="input_imei_1" name="imei_1" value="{{ telefono.imei_1 }}">
            </div>

            <div class="col-lg-4">
                <label for="id_telegram" class="col-form-label">ID Telegram:</label>
                <input type="text" class="form-control form-control-sm" id="input_id_telegram" name="id_telegram" value="{{ telefono.id_telegram }}">

                <label for="numero_telefono" class="col-form-label">Número de Teléfono:</label>
                <input type="text" class="form-control form-control-sm" id="input_numero_telefono" name="numero_telefono" value="{{ telefono.numero_telefono }}">

                <label for="id_vendedor" class="col-form-label">ID Vendedor:</label>
                <input type="text" class="form-control form-control-sm" id="input_id_vendedor" name="id_vendedor" value="{{ telefono.id_vendedor }}">

                <label for="id_supervisor" class="col-form-label">ID Supervisor:</label>
                <input type="text" class="form-control form-control-sm" id="input_id_supervisor" name="id_supervisor" value="{{ telefono.id_supervisor }}">
            </div>

            <div class="col-lg-4">
                <label for="usuario" class="col-form-label">Usuario:</label>
                <input type="text" class="form-control form-control-sm" id="input_usuario" name="usuario" value="{{ telefono.usuario }}">

                <label for="perfil_empleado" class="col-form-label">Perfil Empleado:</label>
                <input type="text" class="form-control form-control-sm" id="input_perfil_empleado" name="perfil_empleado" value="{{ telefono.perfil_empleado }}">

                <label for="observaciones" class="col-form-label">Observaciones:</label>
                <input type="text" class="form-control form-control-sm" id="input_observaciones" name="observaciones" value="{{ telefono.observaciones }}">
            </div>
        </div>

        <div class="row">
            <!-- Checkbox 1 -->
            <div class="col">
                <div class="form-check" style="margin-top: 5px;">
                    <input class="form-check-input" type="checkbox" id="input_activo" name="activo" {% if telefono.activo %}checked{% endif %}>
                    <label class="form-check-label" for="input_activo">Activo</label>
                </div>
            </div>

            <div class="col">
                <div class="form-check" style="margin-top: 5px;">
                    <input class="form-check-input" type="checkbox" id="input_registrado" name="registrado" {% if telefono.registrado %}checked{% endif %}>
                    <label class="form-check-label" for="input_registrado">Registrado</label>
                </div>
            </div>
            <div class="col">
                <div class="form-check" style="margin-top: 5px;">
                    <input class="form-check-input" type="checkbox" id="input_venta_pma" name="venta_pma" {% if telefono.venta_pma %}checked{% endif %}>
                    <label class="form-check-label" for="input_venta_pma">Venta PMA</label>
                </div>
            </div>

            <div class="col">
                <div class="form-check" style="margin-top: 5px;">
                    <input class="form-check-input" type="checkbox" id="input_venta_carbajal" name="venta_carbajal" {% if telefono.venta_carbajal %}checked{% endif %}>
                    <label class="form-check-label" for="input_venta_carbajal">Venta Carbajal</label>
                </div>
            </div>

            <div class="col">
                <div class="form-check" style="margin-top: 5px;">
                    <input class="form-check-input" type="checkbox" id="input_acceso_total" name="acceso_total" {% if telefono.acceso_total %}checked{% endif %}>
                    <label class="form-check-label" for="input_acceso_total">Acceso Total</label>
                </div>
            </div>
        </div>
        <div class="modal-footer">
        <button type="button" id="guardarCambios" class="btn btn-primary">Guardar Cambios</button>
        </div>
    </div>
</form>



<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script>
    $(document).ready(function() {
        // Manejador para el evento click del botón
        $('#guardarCambios').on('click', function() {
            $('#formEditarTelefono').submit();
        });

        // Manejador para el evento submit del formulario
        $('#formEditarTelefono').on('submit', function(event) {
            event.preventDefault();
            var datosFormulario = $(this).serialize();
            var telefonoId = $('#input_usuario_id').val();
            var tel =  $('#input_telefono_id').val();

            $.ajax({
                type: 'POST',
                url: 'editar/' + tel +'/', // Asegúrate de que esta URL sea correcta
                data: datosFormulario,
                beforeSend: function(xhr) {
                    xhr.setRequestHeader("X-CSRFToken", '{{ csrf_token }}');
                },
                success: function(response) {
                    var usuarioId = '{{ usuario_id }}';
                    var myModalEl = document.getElementById('modalEditarTelefono');
                    var modal = bootstrap.Modal.getInstance(myModalEl); // Recupera la instancia del modal
                    modal.hide(); // Cierra el modal
                    Swal.fire("","Telefono editado exitosamente","success");
                
                },
                error: function(error) {
                   
                    console.log(error);
                }
            });
        });
    });
</script>